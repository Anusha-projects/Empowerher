<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Womenâ€™s Health Tracker</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f6fb;
    margin: 0; padding: 0;
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    background: #d75a8a;
    color: white;
    text-align: center;
    padding: 1.2rem 1rem;
    box-shadow: 0 3px 8px rgb(215 90 138 / 0.3);
  }
  header h1 {
    margin: 0 0 0.2rem 0;
    font-weight: 700;
  }
  header p {
    margin: 0;
    font-weight: 500;
    font-size: 1rem;
  }
  main {
    flex: 1;
    display: flex;
    max-width: 960px;
    margin: 1.5rem auto;
    gap: 2rem;
    padding: 0 1rem;
  }
  #formSide {
    flex: 1;
    background: white;
    border-radius: 12px;
    padding: 1.5rem 2rem;
    box-shadow: 0 6px 20px rgb(0 0 0 / 0.1);
  }
  #infoSide {
    flex: 1;
    background: white;
    border-radius: 12px;
    padding: 1.5rem 2rem;
    box-shadow: 0 6px 20px rgb(0 0 0 / 0.1);
    display: flex;
    flex-direction: column;
  }
  label {
    display: block;
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.4rem;
  }
  input[type="date"],
  input[type="number"],
  select {
    width: 100%;
    padding: 0.55rem 0.8rem;
    border-radius: 6px;
    border: 1.8px solid #d9cfe3;
    font-size: 1rem;
    font-weight: 500;
    outline-offset: 2px;
    outline-color: #d75a8a;
    transition: border-color 0.3s ease;
  }
  input[type="date"]:focus,
  input[type="number"]:focus,
  select:focus {
    border-color: #a83267;
  }
  button {
    margin-top: 1.5rem;
    width: 100%;
    background: #d75a8a;
    border: none;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    padding: 0.75rem 0;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 6px 14px rgb(215 90 138 / 0.5);
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #a83267;
  }
  #output {
    margin-top: 1.2rem;
    background: #ffe6f0;
    border-left: 6px solid #d75a8a;
    padding: 1rem 1.2rem;
    border-radius: 8px;
    font-weight: 600;
    flex-shrink: 0;
  }
  #affirmationBox {
    margin-top: 1.2rem;
    background: #ffe6f0;
    padding: 1rem 1.2rem;
    border-radius: 8px;
    font-weight: 600;
    flex-shrink: 0;
    border-left: none; /* No colored bar */
  }
  #historyBox {
    margin-top: 1.8rem;
    flex-grow: 1;
    overflow-y: auto;
    border-top: 1px solid #ddd;
    padding-top: 1rem;
  }
  #historyBox h3 {
    margin-bottom: 0.8rem;
  }
  .history-item {
    background: #faf0f8;
    border-radius: 6px;
    padding: 0.6rem 1rem;
    margin-bottom: 0.6rem;
    font-size: 0.9rem;
    box-shadow: inset 0 0 6px rgb(215 90 138 / 0.2);
  }
  /* Scrollbar for history */
  #historyBox::-webkit-scrollbar {
    width: 8px;
  }
  #historyBox::-webkit-scrollbar-thumb {
    background-color: #d75a8a;
    border-radius: 4px;
  }
  @media (max-width: 760px) {
    main {
      flex-direction: column;
      max-width: 90vw;
      margin: 1rem auto;
      gap: 1rem;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Womenâ€™s Health Tracker</h1>
  <p>Log your cycle, symptoms & get health tips</p>
</header>

<main>
  <section id="formSide" aria-label="Health input form">
    <label for="startDate">Period Start Date:</label>
    <input type="date" id="startDate" max="" />

    <label for="cycleLength">Cycle Length (days):</label>
    <input type="number" id="cycleLength" min="21" max="45" value="28" />

    <label for="symptoms">Symptoms:</label>
    <select id="symptoms">
      <option value="">-- Select symptom --</option>
      <option value="Cramps">Cramps</option>
      <option value="Bloating">Bloating</option>
      <option value="Fatigue">Fatigue</option>
      <option value="Mood Swings">Mood Swings</option>
      <option value="Headache">Headache</option>
    </select>

    <button id="saveBtn">Save Entry</button>
  </section>

  <section id="infoSide" aria-label="Health information and history">
    <div id="output" aria-live="polite"></div>
    <div id="affirmationBox" aria-live="polite"></div>

    <section id="historyBox" aria-label="Previous entries">
      <h3>Past Entries</h3>
      <div id="historyList"><p>No entries yet.</p></div>
    </section>
  </section>
</main>

<script>
  // Set max date to today
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('startDate').setAttribute('max', today);

  const saveBtn = document.getElementById('saveBtn');
  const output = document.getElementById('output');
  const historyList = document.getElementById('historyList');
  const affirmationBox = document.getElementById('affirmationBox');

  const affirmations = [
    "You are strong and capable!",
    "Every day is a fresh start.",
    "Listen to your body and honor your needs.",
    "Self-care is a priority, not a luxury.",
    "Your health is your wealth.",
    "You are beautiful inside and out.",
    "Believe in yourself and your journey.",
    "Small steps lead to big changes.",
    "Take time to rest and recharge.",
    "You are not alone in this."
  ];

  let history = [];

  function showAffirmation() {
    const index = Math.floor(Math.random() * affirmations.length);
    affirmationBox.textContent = "ðŸ’– Daily Affirmation: " + affirmations[index];
  }

  function calculateDates(startDateStr, cycleLength) {
    const startDate = new Date(startDateStr);
    const nextPeriod = new Date(startDate.getTime() + cycleLength * 24 * 60 * 60 * 1000);
    const ovulation = new Date(nextPeriod.getTime() - 14 * 24 * 60 * 60 * 1000);
    return { nextPeriod, ovulation };
  }

  // New: Get precaution based on cycle day
  function getPrecautionByCycleDay(day) {
    if (day >= 1 && day <= 5) {
      return "During your period: Use sanitary products properly, rest well, and use heat pads if cramps occur.";
    } else if (day >= 6 && day <= 13) {
      return "Follicular phase: Focus on hydration, balanced nutrition, and moderate exercise.";
    } else if (day === 14) {
      return "Ovulation day: You may feel more energetic or emotional; maintain healthy habits.";
    } else if (day >= 15 && day <= 28) {
      return "Luteal phase: Manage mood swings with meditation, avoid caffeine, and get sufficient sleep.";
    } else {
      return "Maintain a balanced diet and regular exercise throughout your cycle.";
    }
  }

  function daysSince(dateStr) {
    const startDate = new Date(dateStr);
    const todayDate = new Date();
    const diffTime = todayDate - startDate;
    return Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1; // +1 to count start day as day 1
  }

  function saveEntry() {
    const startDate = document.getElementById('startDate').value;
    const cycleLength = parseInt(document.getElementById('cycleLength').value);
    const symptom = document.getElementById('symptoms').value;

    if (!startDate || !cycleLength) {
      alert("Please enter period start date and cycle length.");
      return;
    }

    const { nextPeriod, ovulation } = calculateDates(startDate, cycleLength);

    const entry = {
      id: Date.now(),
      startDate,
      cycleLength,
      symptom,
      nextPeriod: nextPeriod.toISOString().split('T')[0],
      ovulation: ovulation.toISOString().split('T')[0]
    };

    history.push(entry);

    displayOutput(entry);
    renderHistory();
    showAffirmation();
  }

  function displayOutput(entry) {
    const todayCycleDay = daysSince(entry.startDate);

    output.innerHTML = `
      <p><strong>Next Period:</strong> ${new Date(entry.nextPeriod).toDateString()}</p>
      <p><strong>Ovulation Window:</strong> Around ${new Date(entry.ovulation).toDateString()}</p>
      <p><strong>Current Cycle Day:</strong> ${todayCycleDay}</p>
      <p><strong>Symptom:</strong> ${entry.symptom || "None selected"}</p>
      <p><strong>Health Tip:</strong> ${getPrecautionByCycleDay(todayCycleDay)}</p>
    `;
  }

  function renderHistory() {
    if (history.length === 0) {
      historyList.innerHTML = "<p>No entries yet.</p>";
      return;
    }
    historyList.innerHTML = '';
    history.slice().reverse().forEach(e => {
      const d = new Date(e.startDate);
      const dateStr = d.toDateString();
      const div = document.createElement('div');
      div.className = 'history-item';
      div.textContent = `${dateStr} â€” Cycle ${e.cycleLength}d â€” Symptom: ${e.symptom || "None"}`;
      historyList.appendChild(div);
    });
  }

  saveBtn.addEventListener('click', saveEntry);

  // Show an affirmation on page load
  showAffirmation();

</script>
</body>
</html>
